<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

	<!-- vim: set tabstop=4 softtabstop=0 expandtab shiftwidth=4 smarttab : -->

	<modelVersion>4.0.0</modelVersion>

	<groupId>com.tibco.sb.sample</groupId>
	<artifactId>docker-1st</artifactId>
	<packaging>ep-application</packaging>
	<version>0.0.1-SNAPSHOT</version>
	<name>docker-1st</name>
	<description>My Application</description>

	<!-- common definitions for this version of StreamBase -->
	<parent>
		<groupId>com.tibco.ep.sb.parent</groupId>
		<artifactId>ep-application-docker</artifactId>
		<version>10.5.0</version>
	</parent>

	<properties>
		<dockerDomain>example.com</dockerDomain>
	</properties>

	<build>
		<plugins>
			<plugin>
				<groupId>io.fabric8</groupId>
				<artifactId>fabric8-maven-plugin</artifactId>
				<version>4.3.1</version>
				<configuration>
					<dockerHost>http://192.168.10.51:2375</dockerHost>
					<registry>192.168.10.51:5001</registry>
					<namespace>test-ns</namespace>
					<images>  
						<image>
							<name>sample/docker_1st</name>
							<registry>192.168.10.51:5001</registry>
						</image>
					</images>
					<authConfig>
						<push>
							<username>admin</username>
							<password>cspi00</password>
						</push>
					</authConfig>
					<deployment>
						<name>${project.artifactId}</name>
						<replicas>1</replicas>
					</deployment>			
					<services> 
						<service>
							<name>camel-service</name>
							<headless>true</headless>
						</service>
					</services>
					<enricher>
						<config>
							<fmp-service>
								<name>myservice</name>
								<port>2000:2000</port> 
							</fmp-service>
						</config>
					</enricher>
					<resources>
						<env>
							<NODENAME>A.cluster</NODENAME>
						</env>
					</resources>
					<access>
						<username></username>
						<password></password>
						<masterUrl>https://192.168.10.27:8443</masterUrl>
						<apiVersion></apiVersion>
						<clientCertFile>/var/jenkins_home/cert/ca.crt</clientCertFile>
						<clientCertFile>/var/jenkins_home/cert/client.crt</clientCertFile>
						<clientKeyFile>/var/jenkins_home/cert/client.key</clientKeyFile>
						<!-- <caCertData>LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUN5RENDQWJDZ0F3SUJBZ0lCQURBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwcmRXSmwKY201bGRHVnpNQjRYRFRJd01ERXdPVEEzTURFeE9Gb1hEVE13TURFd05qQTNNREV4T0Zvd0ZURVRNQkVHQTFVRQpBeE1LYTNWaVpYSnVaWFJsY3pDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBUHJhCnplY3pOWEhjRHFqWk9vUW9xSnorTUdveW1CLzBJUUxDWVBBbWdiSHhDUlZyVEZ6TUQ4NHU0TzhYQ1phN3l0WnAKc05BR1BQL2pWSmpHVmNxTmp3QjdrdW56MlJmcEdRUGVlUEZER3BiUkkzaUtUbjVCdzI0VGUxWXJTSzhueHQveQpiMC9OVFh5QjFUMUt1SkpydEwwUDhFOWYvZTNuVFFONWw2Nk9IbXZ5QlZYb2xKcGRCVXpTUVpoZTZEcmh6dnR3Cm94RjJoK3pOY0RjQWhObHlyOURvWDdnOVBnS1ZIUmgwSldEYVllMW1UQ2k3RUQ4cGNYSU81M1NrM2RxR0ltVlMKMEJ5b296ZWZTNTNEOEkvZVI4aFY0MldiZElDZ0hPUExkWnFSQWxpUVJqak04NlRSZHlRRG9zTWptaTV6MWprSworWm9yL0hFakgzd3FVWEtaZHlNQ0F3RUFBYU1qTUNFd0RnWURWUjBQQVFIL0JBUURBZ0trTUE4R0ExVWRFd0VCCi93UUZNQU1CQWY4d0RRWUpLb1pJaHZjTkFRRUxCUUFEZ2dFQkFFMmhqSWlJa044UEdXdi9zdmhJVzRGbTNvNFkKMWVJRFdYOGhNM0VwbWJaRFBnTmF3SkpoUGJlUkdoTmc2WWFpcmJPMVFWSHI4Tlo4TE5IU05nMHNIQUlTSVp6UQp2ZmgvdkVSSm03UHMxMVFrYlNFdXk1MWdDUUM1d1MxenZQVnJZelZzSWVtOVFLTExTc1A2bU1YbE04bUFGZVYxCmo3bnhTN0ZSK21tMm9Zb1RsTTQ5UllhSC9LMnFza3ZEZ1gvV29VUFlFemlUTkVScys5NnFDaW1ZR1lGRHlETHgKbUxFam8vZW5IdThYMmpVYUNrVzhTeGgvK3l1Q2EzOHE1VTk1b1hlL0N1NGMzV3dFRjdwdXdLZy9DRnlETWpaagpGbVlYc2V5dlNYRy9oV0dUZFdWZFhPR01HendCc2xSNk9yeDBpMm01bXJxRStpaGZ4Z29oRW5yZEU5TT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=</caCertData>
						<clientCertData>LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUM5RENDQWR5Z0F3SUJBZ0lJVGsrNFArUjh6OEV3RFFZSktvWklodmNOQVFFTEJRQXdGVEVUTUJFR0ExVUUKQXhNS2EzVmlaWEp1WlhSbGN6QWVGdzB5TURBeE1Ea3dOekF4TVRoYUZ3MHlNVEEwTURjd05qQTBOVFZhTURZeApGekFWQmdOVkJBb1REbk41YzNSbGJUcHRZWE4wWlhKek1Sc3dHUVlEVlFRREV4SmtiMk5yWlhJdFptOXlMV1JsCmMydDBiM0F3Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXdnZ0VLQW9JQkFRRE5zVjJGY1kvVnpDUDIKVTU0emljQzRaOG41dUtGT2ViTFN4VTEyTnZOVzZlT21tTnl3eE5wRDNxcXo4dVI0Sng4dTRKTTk2enVCS1JRMwpNV2FuQmgvMDM0c0d0YjVXdmRIdjF6OXFOUmhHZlZvVmVpTTZkcEcxYVQ5MjZKU1ZFREdCaU9aSWEvR0tzS2FMClRIMVJtOE16bmJ1M2RoRitTajZXa05OL3dNU0VKaEdtY09abmkvekdmb1BYcUpxZkVheERvbU9uemxRTzN1K1kKbkZDbDdENnp5QXkwNFJQK29rdE1rVTNWUVQ1N3QrcDk5M0NYb1JYVjZTNy9CWnNVN0hNcTludEVYMU5EQnVLYQp2S3Q0Q2xMVE55MWRKYkR3cWFkaEhHODYrOTlrS1ZFeTR3dGo1b0VQRWl4TVNrZnpRRDNBODRyUXpqUkRNVlVFCkRYQkd1dzA3QWdNQkFBR2pKekFsTUE0R0ExVWREd0VCL3dRRUF3SUZvREFUQmdOVkhTVUVEREFLQmdnckJnRUYKQlFjREFqQU5CZ2txaGtpRzl3MEJBUXNGQUFPQ0FRRUFBMHY1Y1g0eC8ybUdLek0xRVJ6SGwzOWQwL3RmU0pDSgprQ0FqMzZNRHlManR2UldPQjU4TGsweWxUcmJ3MEhESTNaNnpPRUZOTW9HbTBzTjJCOUN0b0hLaHBGb3Qyb2kwCkVsc3hLQWlJazdFWExrVXRaMlVSc1lOVzhmMDM0Q1Qzc01zdG8yTFVXZmRHc3YrbzBFektXRXZTRW55RzJNRnUKMDZqOHZURDB0L3FpS25WRkJjMVNjak1tcDd2aFhzc2xoREtjL0VvbjgxSzFXZDVBN0lXNTlzVmQzUTNnT3dDego0eXlZS05MQ3UyQU03K29uYnB5THBzQmdnK1doaUlaREpRZHJvOTBwcGZJSWhGdERoeUk1TlloWmtQNzhhZlY3CjRJQy8vTjBpN0RrUlFOVlV6cEkwU1ZDQXhicTl4bzdOTlZXRVVaODJkWlRlMU4zMEdSMXZ3Zz09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K</clientCertData>
						<clientKeyData>LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcFFJQkFBS0NBUUVBemJGZGhYR1AxY3dqOWxPZU00bkF1R2ZKK2JpaFRubXkwc1ZOZGpielZ1bmpwcGpjCnNNVGFROTZxcy9Ma2VDY2ZMdUNUUGVzN2dTa1VOekZtcHdZZjlOK0xCclcrVnIzUjc5Yy9halVZUm4xYUZYb2oKT25hUnRXay9kdWlVbFJBeGdZam1TR3Z4aXJDbWkweDlVWnZETTUyN3QzWVJma28rbHBEVGY4REVoQ1lScG5EbQpaNHY4eG42RDE2aWFueEdzUTZKanA4NVVEdDd2bUp4UXBldytzOGdNdE9FVC9xSkxUSkZOMVVFK2U3ZnFmZmR3Cmw2RVYxZWt1L3dXYkZPeHpLdlo3UkY5VFF3YmltcnlyZUFwUzB6Y3RYU1d3OEttbllSeHZPdnZmWkNsUk11TUwKWSthQkR4SXNURXBIODBBOXdQT0swTTQwUXpGVkJBMXdScnNOT3dJREFRQUJBb0lCQUJSNUVlRGxVN2FvOGU5agpsVHgxK291Z01QYzlERGtlWGRFaXVEb0s4QjkzZWlRcjFOTjNWRzRxN0h5cXNWalFOQWRiYk94ZHpIZG5tazZBCkNVS1lsbmV1QkUxdnEzbEF2WE9NemhBSkp0aGxRNkVkbmdJRXFTNFFRclBZSkduTnljK2x5NTNydUlmZ1cwTkUKSXJrTHN0c2hXUHpDc0swTVFMeUZ2N2RZZlhiVmtYZG1Pb1ZnaFQvQWpJcFVXRDZFdDZXbVBuR3k0OG82MEtPbgp1T0NKc0xZQ1MzelR6SFBHRzZZNkdEYjkxRnF3UjhXRFVvUllpSjhlUW54NnFTYmpBUDdHa1RBbGpJaEFKZ1N2CkdVY0FYSTdSSXdxbm0xbWZvWXhZVlFCQzNzNUlJZUJtTW5vMGV3dEtDeHMzeXZMNlZaVHRRanNRWjFqbmEzRVAKL3VaOEhPRUNnWUVBM003VE1OZjc5U2poeFA3WUFpWDlCK2FyQjJzcld3K284R1B3aUJFMG5Ra2FWbTFwT1FJeQpobVUwa2Y5akx5RW0vNzhLRUlLSm9zNTJ5c0ZkNXhYMCt0ME93UFpPd3MyU0hwME5kMzZDQkFiRGIyWWYrdTJrCitkT0tseU9EL2prTzU1dWtZYU5SdG5WOVM3b1RzZ08yRmRXRHVFaS9lM3FsQVhkM0lMWVVOQkVDZ1lFQTdublUKcUFsWExXWU1XVkt0YUsxUmQybVJnNUEzaWJENGJPc2NQYTRXU0ZEaVVqS2VFZDVRS09PR3RaZUxIc0hMOXJsUAp1VmNaMkRmaGVQa01PZGQ2dGx4SlMwbzZtKzByRFREYk12Tk9laFJteStmRS9wdDlIY3Y1b3JHMWlERTZXaStECjc4cEd6T0tkVEs3VHpDNnN5Ymc2Tk41ZmpVbDZ4UnVBeEM4K1NJc0NnWUVBMGhIN0hvYjljSHBhZ042cmh5KzUKRVNGRkthT3Q5YzVxUFhuM1JweUgzN2JmVmNaMXl3VHFLSzUwVzBvTGhMVVhzMHgvT01IWVRBbjlQbHpGQjZyKwpEUVR1bW1vNitGNDNXK1N6QVRKY1k1UkRydUlNSHVDa2lnSFY0b0NwZk4ydjdtMUc4SlUra2tZbzFEak5zQmlUCnpTWDdVUUgxR25iT01SMEZPeHUvRU9FQ2dZRUF2dmUrektWV00xdXg3ZUdnVGQvbENndjI0L1VjRkY0c1FnUncKaEJBaGRkMlhyeDBycWNGdVRhQU9JdUx0SEQ4eTF5dUVaVFlUMHlyRW12eE14eEVBQ29LU2l3RXhOK1pQZ0d1cwpUUHU3ejFVQkVLNVQrVk9JZU5ENzRrWU95YllxTlVneGpsZGNKUHdmM09WdlkrWElwbXlwNStaZmZDUG9kV2xWCnowVEp5b3NDZ1lFQWpPSEFxYUxHSHYzckxKOVlOemtjMWN4ZmhIK1FOZGxjWVYzNUtoNkpIaUZ5Q0c4c2daM0EKRGE3djcxdDRDVXRLSWpzU3E2Y29SeG9qQUptaGlYUE1sdXpjRjJSbWVnSFRZZm5iYnlxVjM5cnUzMWRCaEROQgpETWxvNGhjaW9nMWl5akNvekpHY1F2UTBOVlRsdWRiQmJPUlRPYm1HTXZwa2Nyay84cDZDUSt3PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo=</clientKeyData> -->
					</access>
				</configuration>
			</plugin>
			<plugin>
				<groupId>com.tibco.ep</groupId>
				<artifactId>ep-maven-plugin</artifactId>
				<extensions>true</extensions>
				<configuration>
					<skipTests>${skipLocalTests}</skipTests>
					<nodes>
						<node>A</node>
					</nodes>
				</configuration>
			</plugin>
			<plugin>
				<groupId>io.fabric8</groupId>
				<artifactId>docker-maven-plugin</artifactId>
				<configuration>
					<dockerHost>http://192.168.10.51:2375</dockerHost>
				</configuration>
				<executions> 
					<execution> 
						<id>start nodes</id> 
						<phase>pre-integration-test</phase> 
						<goals> 
							<goal>start</goal>
						</goals>
						<configuration>
							<startParallel>true</startParallel>
							<skip>${skipDockerTests}</skip>
							<autoCreateCustomNetworks>true</autoCreateCustomNetworks>
							<registry>192.168.10.51:5001</registry>
							<images>
								<image>
									<name>%g/%a:%l</name>
									<alias>A.${project.artifactId}</alias>
									<run>
										<network>
											<name>${dockerDomain}</name>
											<alias>A.${dockerDomain}</alias>
										</network>
										<hostname>A.${dockerDomain}</hostname>
										<env>
											<NODENAME>A.${project.artifactId}</NODENAME>
										</env>
										<log>
											<enabled>true</enabled>
										</log>
										<wait>
											<log>COMMAND FINISHED</log>
											<time>100000</time>
										</wait>
										<namingStrategy>alias</namingStrategy>
									</run>
								</image>
							</images>
							<authConfig>
								<push>
									<username>admin</username>
									<password>cspi00</password>
								</push>
							</authConfig>
				</configuration>
				</execution> 
				<execution>
					<id>stop nodes</id> 
					<phase>post-integration-test</phase> 
					<goals> 
						<goal>stop</goal> 
					</goals> 
					<configuration> 
						<skip>${skipDockerTests}</skip> 
					</configuration> 
					</execution> 
				</executions>
			</plugin>
		</plugins>
	</build>

	<dependencies>
		<dependency>
			<groupId>com.tibco.sb.sample</groupId>
			<artifactId>firstapp</artifactId>
			<version>10.5.0</version>
			<type>ep-eventflow-fragment</type>
		</dependency>
	</dependencies>

</project>
